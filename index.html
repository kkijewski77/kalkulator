<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Szkód Powodziowych - Sprawdź wycenę ubezpieczyciela</title>
    <style>
        /* Twój kod CSS pozostaje bez zmian */
    </style>
</head>
<body>
    <div class="overlay">
        <!-- Treść HTML pozostaje bez zmian -->
    </div>

    <script>
        // Dane obszarów mieszkania
        const obszary = [
            { id: 'pokoj1', nazwa: 'Pokój 1', points: "10,10 150,10 150,100 10,100", powierzchniaProcentowa: 0.31 },
            { id: 'pokoj2', nazwa: 'Pokój 2', points: "160,10 300,10 300,100 160,100", powierzchniaProcentowa: 0.28 },
            { id: 'kuchnia', nazwa: 'Kuchnia', points: "10,110 150,110 150,200 10,200", powierzchniaProcentowa: 0.19 },
            { id: 'lazienka', nazwa: 'Łazienka', points: "160,110 300,110 300,200 160,200", powierzchniaProcentowa: 0.09 },
            { id: 'przedpokoj', nazwa: 'Przedpokój', points: "10,210 300,210 300,250 10,250", powierzchniaProcentowa: 0.13 },
        ];

        // Stopnie zalania
        const stopnieZalania = [
            { id: 'brak', nazwa: 'Brak zalania', mnoznik: 0 },
            { id: 'lekkie', nazwa: 'Lekkie zalanie', mnoznik: 0.3 },
            { id: 'umiarkowane', nazwa: 'Umiarkowane zalanie', mnoznik: 0.6 },
            { id: 'ciezkie', nazwa: 'Ciężkie zalanie', mnoznik: 1 },
        ];

        // Dodatkowe koszty
        const dodatkoweKoszty = {
            osuszanie: 1000,
            dezynfekcja: 500,
            wywoz: 800,
            ekspertyza: 1500,
            projekt: 1200,
            nadzor: 800
        };

        let zaznaczoneObszary = {};
        let stopnieZalaniaObszarow = {};

        function initializeSVG() {
            const svg = document.getElementById('mieszkanie-svg');
            obszary.forEach(obszar => {
                const polygon = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
                polygon.setAttribute('points', obszar.points);
                polygon.setAttribute('id', obszar.id);
                polygon.setAttribute('fill', 'white');
                polygon.setAttribute('stroke', 'black');
                polygon.setAttribute('stroke-width', '2');
                polygon.onclick = () => toggleObszar(obszar.id);
                svg.appendChild(polygon);

                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                const pointsArray = obszar.points.split(' ').map(point => point.split(',').map(Number));
                const centroid = pointsArray.reduce((acc, point) => [acc[0] + point[0], acc[1] + point[1]], [0,0]).map(coord => coord / pointsArray.length);
                text.setAttribute('x', centroid[0]);
                text.setAttribute('y', centroid[1]);
                text.setAttribute('fill', 'black');
                text.setAttribute('font-size', '14');
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('alignment-baseline', 'middle');
                text.textContent = obszar.nazwa;
                svg.appendChild(text);
            });
        }

        function toggleObszar(id) {
            const obszar = document.getElementById(id);
            if (zaznaczoneObszary[id]) {
                obszar.setAttribute('fill', 'white');
                delete zaznaczoneObszary[id];
                delete stopnieZalaniaObszarow[id];
                const element = document.getElementById(`stopien-${id}`);
                if (element) element.remove();
            } else {
                obszar.setAttribute('fill', 'yellow');
                zaznaczoneObszary[id] = true;
                createStopienZalaniaSelect(id);
            }
            obliczKoszt();
        }

        function createStopienZalaniaSelect(id) {
            const container = document.getElementById('stopnie-zalania-container');
            const div = document.createElement('div');
            div.setAttribute('class', 'form
